import{d as Tn,r as bt,f as ce,g as de,h as At,o as Z,u as me,a as pe,i as rt,c as un,w as b,A as ge,b as g,e as c,F as ye,j as we,n as ln,t as gt,k as _,_ as fn,l as M,m as ve}from"./index-BEoJ59tX.js";function Pn(t){const n=Math.abs(t),e=1/(1+n/2),r=e*Math.exp(-n*n-1.26551223+e*(1.00002368+e*(.37409196+e*(.09678418+e*(-.18628806+e*(.27886807+e*(-1.13520398+e*(1.48851587+e*(-.82215223+e*.17087277)))))))));return t>=0?r:2-r}function xe(t){if(t>=2)return-100;if(t<=0)return 100;const n=t<1?t:2-t,e=Math.sqrt(-2*Math.log(n/2));let r=-.70711*((2.30753+e*.27061)/(1+e*(.99229+e*.04481))-e);for(let i=0;i<2;i++){const a=Pn(r)-n;r+=a/(1.1283791670955126*Math.exp(-(r*r))-r*a)}return t<1?r:-r}class J{mean;variance;standardDeviation;constructor(n,e){if(this.mean=n,this.variance=e,e<=0)throw new Error(`Variance must be > 0 (but was ${e})`);this.standardDeviation=Math.sqrt(e)}pdf(n){const e=this.standardDeviation*Math.sqrt(2*Math.PI);return Math.exp(-((n-this.mean)**2)/(2*this.variance))/e}cdf(n){return .5*Pn(-(n-this.mean)/(this.standardDeviation*Math.sqrt(2)))}ppf(n){return this.mean-this.standardDeviation*Math.sqrt(2)*xe(2*n)}mul(n){if(typeof n=="number")return this.scale(n);const e=1/this.variance,r=1/n.variance;return this.fromPrecisionMean(e+r,e*this.mean+r*n.mean)}div(n){if(typeof n=="number")return this.scale(1/n);const e=1/this.variance,r=1/n.variance;return this.fromPrecisionMean(e-r,e*this.mean-r*n.mean)}add(n){return new J(this.mean+n.mean,this.variance+n.variance)}sub(n){return new J(this.mean-n.mean,this.variance+n.variance)}scale(n){return new J(this.mean*n,this.variance*n*n)}fromPrecisionMean(n,e){return new J(e/n,1/n)}}function _t(t,n){return t==null||n==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function be(t,n){return t==null||n==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function Rn(t){let n,e,r;t.length!==2?(n=_t,e=(u,f)=>_t(t(u),f),r=(u,f)=>t(u)-f):(n=t===_t||t===be?t:_e,e=t,r=t);function i(u,f,l=0,h=u.length){if(l<h){if(n(f,f)!==0)return h;do{const d=l+h>>>1;e(u[d],f)<0?l=d+1:h=d}while(l<h)}return l}function a(u,f,l=0,h=u.length){if(l<h){if(n(f,f)!==0)return h;do{const d=l+h>>>1;e(u[d],f)<=0?l=d+1:h=d}while(l<h)}return l}function s(u,f,l=0,h=u.length){const d=i(u,f,l,h-1);return d>l&&r(u[d-1],f)>-r(u[d],f)?d-1:d}return{left:i,center:s,right:a}}function _e(){return 0}function ke(t){return t===null?NaN:+t}const Me=Rn(_t),Ne=Me.right;Rn(ke).center;const Ae=Math.sqrt(50),Se=Math.sqrt(10),Ee=Math.sqrt(2);function St(t,n,e){const r=(n-t)/Math.max(0,e),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),s=a>=Ae?10:a>=Se?5:a>=Ee?2:1;let u,f,l;return i<0?(l=Math.pow(10,-i)/s,u=Math.round(t*l),f=Math.round(n*l),u/l<t&&++u,f/l>n&&--f,l=-l):(l=Math.pow(10,i)*s,u=Math.round(t/l),f=Math.round(n/l),u*l<t&&++u,f*l>n&&--f),f<u&&.5<=e&&e<2?St(t,n,e*2):[u,f,l]}function $e(t,n,e){if(n=+n,t=+t,e=+e,!(e>0))return[];if(t===n)return[t];const r=n<t,[i,a,s]=r?St(n,t,e):St(t,n,e);if(!(a>=i))return[];const u=a-i+1,f=new Array(u);if(r)if(s<0)for(let l=0;l<u;++l)f[l]=(a-l)/-s;else for(let l=0;l<u;++l)f[l]=(a-l)*s;else if(s<0)for(let l=0;l<u;++l)f[l]=(i+l)/-s;else for(let l=0;l<u;++l)f[l]=(i+l)*s;return f}function Bt(t,n,e){return n=+n,t=+t,e=+e,St(t,n,e)[2]}function Xe(t,n,e){n=+n,t=+t,e=+e;const r=n<t,i=r?Bt(n,t,e):Bt(t,n,e);return(r?-1:1)*(i<0?1/-i:i)}function Ce(t,n){let e=0,r=0;for(let i of t)i!=null&&(i=+i)>=i&&(++e,r+=i);if(e)return r/e}function Ie(t){return t}var Te=3,hn=1e-6;function Pe(t){return"translate("+t+",0)"}function Re(t){return n=>+t(n)}function Fe(t,n){return n=Math.max(0,t.bandwidth()-n*2)/2,t.round()&&(n=Math.round(n)),e=>+t(e)+n}function Ve(){return!this.__axis}function qe(t,n){var e=[],r=null,i=null,a=6,s=6,u=3,f=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=1,h="y",d=Pe;function m(p){var v=r??(n.ticks?n.ticks.apply(n,e):n.domain()),k=i??(n.tickFormat?n.tickFormat.apply(n,e):Ie),A=Math.max(a,0)+u,X=n.range(),w=+X[0]+f,o=+X[X.length-1]+f,N=(n.bandwidth?Fe:Re)(n.copy(),f),x=p.selection?p.selection():p,I=x.selectAll(".domain").data([null]),T=x.selectAll(".tick").data(v,n).order(),U=T.exit(),K=T.enter().append("g").attr("class","tick"),B=T.select("line"),y=T.select("text");I=I.merge(I.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),T=T.merge(K),B=B.merge(K.append("line").attr("stroke","currentColor").attr(h+"2",l*a)),y=y.merge(K.append("text").attr("fill","currentColor").attr(h,l*A).attr("dy","0.71em")),p!==x&&(I=I.transition(p),T=T.transition(p),B=B.transition(p),y=y.transition(p),U=U.transition(p).attr("opacity",hn).attr("transform",function(E){return isFinite(E=N(E))?d(E+f):this.getAttribute("transform")}),K.attr("opacity",hn).attr("transform",function(E){var S=this.parentNode.__axis;return d((S&&isFinite(S=S(E))?S:N(E))+f)})),U.remove(),I.attr("d",s?"M"+w+","+l*s+"V"+f+"H"+o+"V"+l*s:"M"+w+","+f+"H"+o),T.attr("opacity",1).attr("transform",function(E){return d(N(E)+f)}),B.attr(h+"2",l*a),y.attr(h,l*A).text(k),x.filter(Ve).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),x.each(function(){this.__axis=N})}return m.scale=function(p){return arguments.length?(n=p,m):n},m.ticks=function(){return e=Array.from(arguments),m},m.tickArguments=function(p){return arguments.length?(e=p==null?[]:Array.from(p),m):e.slice()},m.tickValues=function(p){return arguments.length?(r=p==null?null:Array.from(p),m):r&&r.slice()},m.tickFormat=function(p){return arguments.length?(i=p,m):i},m.tickSize=function(p){return arguments.length?(a=s=+p,m):a},m.tickSizeInner=function(p){return arguments.length?(a=+p,m):a},m.tickSizeOuter=function(p){return arguments.length?(s=+p,m):s},m.tickPadding=function(p){return arguments.length?(u=+p,m):u},m.offset=function(p){return arguments.length?(f=+p,m):f},m}function De(t){return qe(Te,t)}var ze={value:()=>{}};function Fn(){for(var t=0,n=arguments.length,e={},r;t<n;++t){if(!(r=arguments[t]+"")||r in e||/[\s.]/.test(r))throw new Error("illegal type: "+r);e[r]=[]}return new kt(e)}function kt(t){this._=t}function Le(t,n){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");if(i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),e&&!n.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:r}})}kt.prototype=Fn.prototype={constructor:kt,on:function(t,n){var e=this._,r=Le(t+"",e),i,a=-1,s=r.length;if(arguments.length<2){for(;++a<s;)if((i=(t=r[a]).type)&&(i=Be(e[i],t.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++a<s;)if(i=(t=r[a]).type)e[i]=cn(e[i],t.name,n);else if(n==null)for(i in e)e[i]=cn(e[i],t.name,null);return this},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new kt(t)},call:function(t,n){if((i=arguments.length-2)>0)for(var e=new Array(i),r=0,i,a;r<i;++r)e[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],r=0,i=a.length;r<i;++r)a[r].value.apply(n,e)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(n,e)}};function Be(t,n){for(var e=0,r=t.length,i;e<r;++e)if((i=t[e]).name===n)return i.value}function cn(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=ze,t=t.slice(0,r).concat(t.slice(r+1));break}return e!=null&&t.push({name:n,value:e}),t}var Ht="http://www.w3.org/1999/xhtml";const dn={svg:"http://www.w3.org/2000/svg",xhtml:Ht,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vt(t){var n=t+="",e=n.indexOf(":");return e>=0&&(n=t.slice(0,e))!=="xmlns"&&(t=t.slice(e+1)),dn.hasOwnProperty(n)?{space:dn[n],local:t}:t}function He(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===Ht&&n.documentElement.namespaceURI===Ht?n.createElement(t):n.createElementNS(e,t)}}function Oe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Vn(t){var n=Vt(t);return(n.local?Oe:He)(n)}function Ye(){}function Jt(t){return t==null?Ye:function(){return this.querySelector(t)}}function We(t){typeof t!="function"&&(t=Jt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],s=a.length,u=r[i]=new Array(s),f,l,h=0;h<s;++h)(f=a[h])&&(l=t.call(f,f.__data__,h,a))&&("__data__"in f&&(l.__data__=f.__data__),u[h]=l);return new C(r,this._parents)}function Ue(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Ke(){return[]}function qn(t){return t==null?Ke:function(){return this.querySelectorAll(t)}}function Ge(t){return function(){return Ue(t.apply(this,arguments))}}function Ze(t){typeof t=="function"?t=Ge(t):t=qn(t);for(var n=this._groups,e=n.length,r=[],i=[],a=0;a<e;++a)for(var s=n[a],u=s.length,f,l=0;l<u;++l)(f=s[l])&&(r.push(t.call(f,f.__data__,l,s)),i.push(f));return new C(r,i)}function Dn(t){return function(){return this.matches(t)}}function zn(t){return function(n){return n.matches(t)}}var Je=Array.prototype.find;function Qe(t){return function(){return Je.call(this.children,t)}}function je(){return this.firstElementChild}function tr(t){return this.select(t==null?je:Qe(typeof t=="function"?t:zn(t)))}var nr=Array.prototype.filter;function er(){return Array.from(this.children)}function rr(t){return function(){return nr.call(this.children,t)}}function ir(t){return this.selectAll(t==null?er:rr(typeof t=="function"?t:zn(t)))}function or(t){typeof t!="function"&&(t=Dn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],s=a.length,u=r[i]=[],f,l=0;l<s;++l)(f=a[l])&&t.call(f,f.__data__,l,a)&&u.push(f);return new C(r,this._parents)}function Ln(t){return new Array(t.length)}function ar(){return new C(this._enter||this._groups.map(Ln),this._parents)}function Et(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}Et.prototype={constructor:Et,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function sr(t){return function(){return t}}function ur(t,n,e,r,i,a){for(var s=0,u,f=n.length,l=a.length;s<l;++s)(u=n[s])?(u.__data__=a[s],r[s]=u):e[s]=new Et(t,a[s]);for(;s<f;++s)(u=n[s])&&(i[s]=u)}function lr(t,n,e,r,i,a,s){var u,f,l=new Map,h=n.length,d=a.length,m=new Array(h),p;for(u=0;u<h;++u)(f=n[u])&&(m[u]=p=s.call(f,f.__data__,u,n)+"",l.has(p)?i[u]=f:l.set(p,f));for(u=0;u<d;++u)p=s.call(t,a[u],u,a)+"",(f=l.get(p))?(r[u]=f,f.__data__=a[u],l.delete(p)):e[u]=new Et(t,a[u]);for(u=0;u<h;++u)(f=n[u])&&l.get(m[u])===f&&(i[u]=f)}function fr(t){return t.__data__}function hr(t,n){if(!arguments.length)return Array.from(this,fr);var e=n?lr:ur,r=this._parents,i=this._groups;typeof t!="function"&&(t=sr(t));for(var a=i.length,s=new Array(a),u=new Array(a),f=new Array(a),l=0;l<a;++l){var h=r[l],d=i[l],m=d.length,p=cr(t.call(h,h&&h.__data__,l,r)),v=p.length,k=u[l]=new Array(v),A=s[l]=new Array(v),X=f[l]=new Array(m);e(h,d,k,A,X,p,n);for(var w=0,o=0,N,x;w<v;++w)if(N=k[w]){for(w>=o&&(o=w+1);!(x=A[o])&&++o<v;);N._next=x||null}}return s=new C(s,r),s._enter=u,s._exit=f,s}function cr(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function dr(){return new C(this._exit||this._groups.map(Ln),this._parents)}function mr(t,n,e){var r=this.enter(),i=this,a=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),n!=null&&(i=n(i),i&&(i=i.selection())),e==null?a.remove():e(a),r&&i?r.merge(i).order():i}function pr(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,i=e.length,a=r.length,s=Math.min(i,a),u=new Array(i),f=0;f<s;++f)for(var l=e[f],h=r[f],d=l.length,m=u[f]=new Array(d),p,v=0;v<d;++v)(p=l[v]||h[v])&&(m[v]=p);for(;f<i;++f)u[f]=e[f];return new C(u,this._parents)}function gr(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r=t[n],i=r.length-1,a=r[i],s;--i>=0;)(s=r[i])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function yr(t){t||(t=wr);function n(d,m){return d&&m?t(d.__data__,m.__data__):!d-!m}for(var e=this._groups,r=e.length,i=new Array(r),a=0;a<r;++a){for(var s=e[a],u=s.length,f=i[a]=new Array(u),l,h=0;h<u;++h)(l=s[h])&&(f[h]=l);f.sort(n)}return new C(i,this._parents).order()}function wr(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function vr(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function xr(){return Array.from(this)}function br(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length;i<a;++i){var s=r[i];if(s)return s}return null}function _r(){let t=0;for(const n of this)++t;return t}function kr(){return!this.node()}function Mr(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i=n[e],a=0,s=i.length,u;a<s;++a)(u=i[a])&&t.call(u,u.__data__,a,i);return this}function Nr(t){return function(){this.removeAttribute(t)}}function Ar(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Sr(t,n){return function(){this.setAttribute(t,n)}}function Er(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function $r(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttribute(t):this.setAttribute(t,e)}}function Xr(t,n){return function(){var e=n.apply(this,arguments);e==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function Cr(t,n){var e=Vt(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((n==null?e.local?Ar:Nr:typeof n=="function"?e.local?Xr:$r:e.local?Er:Sr)(e,n))}function Bn(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Ir(t){return function(){this.style.removeProperty(t)}}function Tr(t,n,e){return function(){this.style.setProperty(t,n,e)}}function Pr(t,n,e){return function(){var r=n.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function Rr(t,n,e){return arguments.length>1?this.each((n==null?Ir:typeof n=="function"?Pr:Tr)(t,n,e??"")):tt(this.node(),t)}function tt(t,n){return t.style.getPropertyValue(n)||Bn(t).getComputedStyle(t,null).getPropertyValue(n)}function Fr(t){return function(){delete this[t]}}function Vr(t,n){return function(){this[t]=n}}function qr(t,n){return function(){var e=n.apply(this,arguments);e==null?delete this[t]:this[t]=e}}function Dr(t,n){return arguments.length>1?this.each((n==null?Fr:typeof n=="function"?qr:Vr)(t,n)):this.node()[t]}function Hn(t){return t.trim().split(/^|\s+/)}function Qt(t){return t.classList||new On(t)}function On(t){this._node=t,this._names=Hn(t.getAttribute("class")||"")}On.prototype={add:function(t){var n=this._names.indexOf(t);n<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Yn(t,n){for(var e=Qt(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function Wn(t,n){for(var e=Qt(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function zr(t){return function(){Yn(this,t)}}function Lr(t){return function(){Wn(this,t)}}function Br(t,n){return function(){(n.apply(this,arguments)?Yn:Wn)(this,t)}}function Hr(t,n){var e=Hn(t+"");if(arguments.length<2){for(var r=Qt(this.node()),i=-1,a=e.length;++i<a;)if(!r.contains(e[i]))return!1;return!0}return this.each((typeof n=="function"?Br:n?zr:Lr)(e,n))}function Or(){this.textContent=""}function Yr(t){return function(){this.textContent=t}}function Wr(t){return function(){var n=t.apply(this,arguments);this.textContent=n??""}}function Ur(t){return arguments.length?this.each(t==null?Or:(typeof t=="function"?Wr:Yr)(t)):this.node().textContent}function Kr(){this.innerHTML=""}function Gr(t){return function(){this.innerHTML=t}}function Zr(t){return function(){var n=t.apply(this,arguments);this.innerHTML=n??""}}function Jr(t){return arguments.length?this.each(t==null?Kr:(typeof t=="function"?Zr:Gr)(t)):this.node().innerHTML}function Qr(){this.nextSibling&&this.parentNode.appendChild(this)}function jr(){return this.each(Qr)}function ti(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ni(){return this.each(ti)}function ei(t){var n=typeof t=="function"?t:Vn(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function ri(){return null}function ii(t,n){var e=typeof t=="function"?t:Vn(t),r=n==null?ri:typeof n=="function"?n:Jt(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})}function oi(){var t=this.parentNode;t&&t.removeChild(this)}function ai(){return this.each(oi)}function si(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function ui(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function li(t){return this.select(t?ui:si)}function fi(t){return arguments.length?this.property("__data__",t):this.node().__data__}function hi(t){return function(n){t.call(this,n,this.__data__)}}function ci(t){return t.trim().split(/^|\s+/).map(function(n){var e="",r=n.indexOf(".");return r>=0&&(e=n.slice(r+1),n=n.slice(0,r)),{type:n,name:e}})}function di(t){return function(){var n=this.__on;if(n){for(var e=0,r=-1,i=n.length,a;e<i;++e)a=n[e],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):n[++r]=a;++r?n.length=r:delete this.__on}}}function mi(t,n,e){return function(){var r=this.__on,i,a=hi(n);if(r){for(var s=0,u=r.length;s<u;++s)if((i=r[s]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=e),i.value=n;return}}this.addEventListener(t.type,a,e),i={type:t.type,name:t.name,value:n,listener:a,options:e},r?r.push(i):this.__on=[i]}}function pi(t,n,e){var r=ci(t+""),i,a=r.length,s;if(arguments.length<2){var u=this.node().__on;if(u){for(var f=0,l=u.length,h;f<l;++f)for(i=0,h=u[f];i<a;++i)if((s=r[i]).type===h.type&&s.name===h.name)return h.value}return}for(u=n?mi:di,i=0;i<a;++i)this.each(u(r[i],n,e));return this}function Un(t,n,e){var r=Bn(t),i=r.CustomEvent;typeof i=="function"?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}function gi(t,n){return function(){return Un(this,t,n)}}function yi(t,n){return function(){return Un(this,t,n.apply(this,arguments))}}function wi(t,n){return this.each((typeof n=="function"?yi:gi)(t,n))}function*vi(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,a=r.length,s;i<a;++i)(s=r[i])&&(yield s)}var Kn=[null];function C(t,n){this._groups=t,this._parents=n}function ht(){return new C([[document.documentElement]],Kn)}function xi(){return this}C.prototype=ht.prototype={constructor:C,select:We,selectAll:Ze,selectChild:tr,selectChildren:ir,filter:or,data:hr,enter:ar,exit:dr,join:mr,merge:pr,selection:xi,order:gr,sort:yr,call:vr,nodes:xr,node:br,size:_r,empty:kr,each:Mr,attr:Cr,style:Rr,property:Dr,classed:Hr,text:Ur,html:Jr,raise:jr,lower:ni,append:ei,insert:ii,remove:ai,clone:li,datum:fi,on:pi,dispatch:wi,[Symbol.iterator]:vi};function bi(t){return typeof t=="string"?new C([[document.querySelector(t)]],[document.documentElement]):new C([[t]],Kn)}function jt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Gn(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function ct(){}var ut=.7,$t=1/ut,j="\\s*([+-]?\\d+)\\s*",lt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",V="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_i=/^#([0-9a-f]{3,8})$/,ki=new RegExp(`^rgb\\(${j},${j},${j}\\)$`),Mi=new RegExp(`^rgb\\(${V},${V},${V}\\)$`),Ni=new RegExp(`^rgba\\(${j},${j},${j},${lt}\\)$`),Ai=new RegExp(`^rgba\\(${V},${V},${V},${lt}\\)$`),Si=new RegExp(`^hsl\\(${lt},${V},${V}\\)$`),Ei=new RegExp(`^hsla\\(${lt},${V},${V},${lt}\\)$`),mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jt(ct,Y,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:pn,formatHex:pn,formatHex8:$i,formatHsl:Xi,formatRgb:gn,toString:gn});function pn(){return this.rgb().formatHex()}function $i(){return this.rgb().formatHex8()}function Xi(){return Zn(this).formatHsl()}function gn(){return this.rgb().formatRgb()}function Y(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=_i.exec(t))?(e=n[1].length,n=parseInt(n[1],16),e===6?yn(n):e===3?new $(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):e===8?yt(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):e===4?yt(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ki.exec(t))?new $(n[1],n[2],n[3],1):(n=Mi.exec(t))?new $(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=Ni.exec(t))?yt(n[1],n[2],n[3],n[4]):(n=Ai.exec(t))?yt(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=Si.exec(t))?xn(n[1],n[2]/100,n[3]/100,1):(n=Ei.exec(t))?xn(n[1],n[2]/100,n[3]/100,n[4]):mn.hasOwnProperty(t)?yn(mn[t]):t==="transparent"?new $(NaN,NaN,NaN,0):null}function yn(t){return new $(t>>16&255,t>>8&255,t&255,1)}function yt(t,n,e,r){return r<=0&&(t=n=e=NaN),new $(t,n,e,r)}function Ci(t){return t instanceof ct||(t=Y(t)),t?(t=t.rgb(),new $(t.r,t.g,t.b,t.opacity)):new $}function Ot(t,n,e,r){return arguments.length===1?Ci(t):new $(t,n,e,r??1)}function $(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}jt($,Ot,Gn(ct,{brighter(t){return t=t==null?$t:Math.pow($t,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ut:Math.pow(ut,t),new $(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new $(O(this.r),O(this.g),O(this.b),Xt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wn,formatHex:wn,formatHex8:Ii,formatRgb:vn,toString:vn}));function wn(){return`#${H(this.r)}${H(this.g)}${H(this.b)}`}function Ii(){return`#${H(this.r)}${H(this.g)}${H(this.b)}${H((isNaN(this.opacity)?1:this.opacity)*255)}`}function vn(){const t=Xt(this.opacity);return`${t===1?"rgb(":"rgba("}${O(this.r)}, ${O(this.g)}, ${O(this.b)}${t===1?")":`, ${t})`}`}function Xt(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function O(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function H(t){return t=O(t),(t<16?"0":"")+t.toString(16)}function xn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new R(t,n,e,r)}function Zn(t){if(t instanceof R)return new R(t.h,t.s,t.l,t.opacity);if(t instanceof ct||(t=Y(t)),!t)return new R;if(t instanceof R)return t;t=t.rgb();var n=t.r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),a=Math.max(n,e,r),s=NaN,u=a-i,f=(a+i)/2;return u?(n===a?s=(e-r)/u+(e<r)*6:e===a?s=(r-n)/u+2:s=(n-e)/u+4,u/=f<.5?a+i:2-a-i,s*=60):u=f>0&&f<1?0:s,new R(s,u,f,t.opacity)}function Ti(t,n,e,r){return arguments.length===1?Zn(t):new R(t,n,e,r??1)}function R(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}jt(R,Ti,Gn(ct,{brighter(t){return t=t==null?$t:Math.pow($t,t),new R(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ut:Math.pow(ut,t),new R(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new $(zt(t>=240?t-240:t+120,i,r),zt(t,i,r),zt(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new R(bn(this.h),wt(this.s),wt(this.l),Xt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Xt(this.opacity);return`${t===1?"hsl(":"hsla("}${bn(this.h)}, ${wt(this.s)*100}%, ${wt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bn(t){return t=(t||0)%360,t<0?t+360:t}function wt(t){return Math.max(0,Math.min(1,t||0))}function zt(t,n,e){return(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)*255}const tn=t=>()=>t;function Pi(t,n){return function(e){return t+e*n}}function Ri(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}function Fi(t){return(t=+t)==1?Jn:function(n,e){return e-n?Ri(n,e,t):tn(isNaN(n)?e:n)}}function Jn(t,n){var e=n-t;return e?Pi(t,e):tn(isNaN(t)?n:t)}const Ct=(function t(n){var e=Fi(n);function r(i,a){var s=e((i=Ot(i)).r,(a=Ot(a)).r),u=e(i.g,a.g),f=e(i.b,a.b),l=Jn(i.opacity,a.opacity);return function(h){return i.r=s(h),i.g=u(h),i.b=f(h),i.opacity=l(h),i+""}}return r.gamma=t,r})(1);function Vi(t,n){n||(n=[]);var e=t?Math.min(n.length,t.length):0,r=n.slice(),i;return function(a){for(i=0;i<e;++i)r[i]=t[i]*(1-a)+n[i]*a;return r}}function qi(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Di(t,n){var e=n?n.length:0,r=t?Math.min(e,t.length):0,i=new Array(r),a=new Array(e),s;for(s=0;s<r;++s)i[s]=nn(t[s],n[s]);for(;s<e;++s)a[s]=n[s];return function(u){for(s=0;s<r;++s)a[s]=i[s](u);return a}}function zi(t,n){var e=new Date;return t=+t,n=+n,function(r){return e.setTime(t*(1-r)+n*r),e}}function P(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}function Li(t,n){var e={},r={},i;(t===null||typeof t!="object")&&(t={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in t?e[i]=nn(t[i],n[i]):r[i]=n[i];return function(a){for(i in e)r[i]=e[i](a);return r}}var Yt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lt=new RegExp(Yt.source,"g");function Bi(t){return function(){return t}}function Hi(t){return function(n){return t(n)+""}}function Qn(t,n){var e=Yt.lastIndex=Lt.lastIndex=0,r,i,a,s=-1,u=[],f=[];for(t=t+"",n=n+"";(r=Yt.exec(t))&&(i=Lt.exec(n));)(a=i.index)>e&&(a=n.slice(e,a),u[s]?u[s]+=a:u[++s]=a),(r=r[0])===(i=i[0])?u[s]?u[s]+=i:u[++s]=i:(u[++s]=null,f.push({i:s,x:P(r,i)})),e=Lt.lastIndex;return e<n.length&&(a=n.slice(e),u[s]?u[s]+=a:u[++s]=a),u.length<2?f[0]?Hi(f[0].x):Bi(n):(n=f.length,function(l){for(var h=0,d;h<n;++h)u[(d=f[h]).i]=d.x(l);return u.join("")})}function nn(t,n){var e=typeof n,r;return n==null||e==="boolean"?tn(n):(e==="number"?P:e==="string"?(r=Y(n))?(n=r,Ct):Qn:n instanceof Y?Ct:n instanceof Date?zi:qi(n)?Vi:Array.isArray(n)?Di:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?Li:P)(t,n)}function Oi(t,n){return t=+t,n=+n,function(e){return Math.round(t*(1-e)+n*e)}}var _n=180/Math.PI,Wt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jn(t,n,e,r,i,a){var s,u,f;return(s=Math.sqrt(t*t+n*n))&&(t/=s,n/=s),(f=t*e+n*r)&&(e-=t*f,r-=n*f),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,f/=u),t*r<n*e&&(t=-t,n=-n,f=-f,s=-s),{translateX:i,translateY:a,rotate:Math.atan2(n,t)*_n,skewX:Math.atan(f)*_n,scaleX:s,scaleY:u}}var vt;function Yi(t){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Wt:jn(n.a,n.b,n.c,n.d,n.e,n.f)}function Wi(t){return t==null||(vt||(vt=document.createElementNS("http://www.w3.org/2000/svg","g")),vt.setAttribute("transform",t),!(t=vt.transform.baseVal.consolidate()))?Wt:(t=t.matrix,jn(t.a,t.b,t.c,t.d,t.e,t.f))}function te(t,n,e,r){function i(l){return l.length?l.pop()+" ":""}function a(l,h,d,m,p,v){if(l!==d||h!==m){var k=p.push("translate(",null,n,null,e);v.push({i:k-4,x:P(l,d)},{i:k-2,x:P(h,m)})}else(d||m)&&p.push("translate("+d+n+m+e)}function s(l,h,d,m){l!==h?(l-h>180?h+=360:h-l>180&&(l+=360),m.push({i:d.push(i(d)+"rotate(",null,r)-2,x:P(l,h)})):h&&d.push(i(d)+"rotate("+h+r)}function u(l,h,d,m){l!==h?m.push({i:d.push(i(d)+"skewX(",null,r)-2,x:P(l,h)}):h&&d.push(i(d)+"skewX("+h+r)}function f(l,h,d,m,p,v){if(l!==d||h!==m){var k=p.push(i(p)+"scale(",null,",",null,")");v.push({i:k-4,x:P(l,d)},{i:k-2,x:P(h,m)})}else(d!==1||m!==1)&&p.push(i(p)+"scale("+d+","+m+")")}return function(l,h){var d=[],m=[];return l=t(l),h=t(h),a(l.translateX,l.translateY,h.translateX,h.translateY,d,m),s(l.rotate,h.rotate,d,m),u(l.skewX,h.skewX,d,m),f(l.scaleX,l.scaleY,h.scaleX,h.scaleY,d,m),l=h=null,function(p){for(var v=-1,k=m.length,A;++v<k;)d[(A=m[v]).i]=A.x(p);return d.join("")}}}var Ui=te(Yi,"px, ","px)","deg)"),Ki=te(Wi,", ",")",")"),nt=0,ot=0,it=0,ne=1e3,It,at,Tt=0,W=0,qt=0,ft=typeof performance=="object"&&performance.now?performance:Date,ee=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function en(){return W||(ee(Gi),W=ft.now()+qt)}function Gi(){W=0}function Pt(){this._call=this._time=this._next=null}Pt.prototype=re.prototype={constructor:Pt,restart:function(t,n,e){if(typeof t!="function")throw new TypeError("callback is not a function");e=(e==null?en():+e)+(n==null?0:+n),!this._next&&at!==this&&(at?at._next=this:It=this,at=this),this._call=t,this._time=e,Ut()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ut())}};function re(t,n,e){var r=new Pt;return r.restart(t,n,e),r}function Zi(){en(),++nt;for(var t=It,n;t;)(n=W-t._time)>=0&&t._call.call(void 0,n),t=t._next;--nt}function kn(){W=(Tt=ft.now())+qt,nt=ot=0;try{Zi()}finally{nt=0,Qi(),W=0}}function Ji(){var t=ft.now(),n=t-Tt;n>ne&&(qt-=n,Tt=t)}function Qi(){for(var t,n=It,e,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:It=e);at=t,Ut(r)}function Ut(t){if(!nt){ot&&(ot=clearTimeout(ot));var n=t-W;n>24?(t<1/0&&(ot=setTimeout(kn,t-ft.now()-qt)),it&&(it=clearInterval(it))):(it||(Tt=ft.now(),it=setInterval(Ji,ne)),nt=1,ee(kn))}}function Mn(t,n,e){var r=new Pt;return n=n==null?0:+n,r.restart(i=>{r.stop(),t(i+n)},n,e),r}var ji=Fn("start","end","cancel","interrupt"),to=[],ie=0,Nn=1,Kt=2,Mt=3,An=4,Gt=5,Nt=6;function Dt(t,n,e,r,i,a){var s=t.__transition;if(!s)t.__transition={};else if(e in s)return;no(t,e,{name:n,index:r,group:i,on:ji,tween:to,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ie})}function rn(t,n){var e=F(t,n);if(e.state>ie)throw new Error("too late; already scheduled");return e}function q(t,n){var e=F(t,n);if(e.state>Mt)throw new Error("too late; already running");return e}function F(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function no(t,n,e){var r=t.__transition,i;r[n]=e,e.timer=re(a,0,e.time);function a(l){e.state=Nn,e.timer.restart(s,e.delay,e.time),e.delay<=l&&s(l-e.delay)}function s(l){var h,d,m,p;if(e.state!==Nn)return f();for(h in r)if(p=r[h],p.name===e.name){if(p.state===Mt)return Mn(s);p.state===An?(p.state=Nt,p.timer.stop(),p.on.call("interrupt",t,t.__data__,p.index,p.group),delete r[h]):+h<n&&(p.state=Nt,p.timer.stop(),p.on.call("cancel",t,t.__data__,p.index,p.group),delete r[h])}if(Mn(function(){e.state===Mt&&(e.state=An,e.timer.restart(u,e.delay,e.time),u(l))}),e.state=Kt,e.on.call("start",t,t.__data__,e.index,e.group),e.state===Kt){for(e.state=Mt,i=new Array(m=e.tween.length),h=0,d=-1;h<m;++h)(p=e.tween[h].value.call(t,t.__data__,e.index,e.group))&&(i[++d]=p);i.length=d+1}}function u(l){for(var h=l<e.duration?e.ease.call(null,l/e.duration):(e.timer.restart(f),e.state=Gt,1),d=-1,m=i.length;++d<m;)i[d].call(t,h);e.state===Gt&&(e.on.call("end",t,t.__data__,e.index,e.group),f())}function f(){e.state=Nt,e.timer.stop(),delete r[n];for(var l in r)return;delete t.__transition}}function eo(t,n){var e=t.__transition,r,i,a=!0,s;if(e){n=n==null?null:n+"";for(s in e){if((r=e[s]).name!==n){a=!1;continue}i=r.state>Kt&&r.state<Gt,r.state=Nt,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete e[s]}a&&delete t.__transition}}function ro(t){return this.each(function(){eo(this,t)})}function io(t,n){var e,r;return function(){var i=q(this,t),a=i.tween;if(a!==e){r=e=a;for(var s=0,u=r.length;s<u;++s)if(r[s].name===n){r=r.slice(),r.splice(s,1);break}}i.tween=r}}function oo(t,n,e){var r,i;if(typeof e!="function")throw new Error;return function(){var a=q(this,t),s=a.tween;if(s!==r){i=(r=s).slice();for(var u={name:n,value:e},f=0,l=i.length;f<l;++f)if(i[f].name===n){i[f]=u;break}f===l&&i.push(u)}a.tween=i}}function ao(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r=F(this.node(),e).tween,i=0,a=r.length,s;i<a;++i)if((s=r[i]).name===t)return s.value;return null}return this.each((n==null?io:oo)(e,t,n))}function on(t,n,e){var r=t._id;return t.each(function(){var i=q(this,r);(i.value||(i.value={}))[n]=e.apply(this,arguments)}),function(i){return F(i,r).value[n]}}function oe(t,n){var e;return(typeof n=="number"?P:n instanceof Y?Ct:(e=Y(n))?(n=e,Ct):Qn)(t,n)}function so(t){return function(){this.removeAttribute(t)}}function uo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function lo(t,n,e){var r,i=e+"",a;return function(){var s=this.getAttribute(t);return s===i?null:s===r?a:a=n(r=s,e)}}function fo(t,n,e){var r,i=e+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===i?null:s===r?a:a=n(r=s,e)}}function ho(t,n,e){var r,i,a;return function(){var s,u=e(this),f;return u==null?void this.removeAttribute(t):(s=this.getAttribute(t),f=u+"",s===f?null:s===r&&f===i?a:(i=f,a=n(r=s,u)))}}function co(t,n,e){var r,i,a;return function(){var s,u=e(this),f;return u==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),f=u+"",s===f?null:s===r&&f===i?a:(i=f,a=n(r=s,u)))}}function mo(t,n){var e=Vt(t),r=e==="transform"?Ki:oe;return this.attrTween(t,typeof n=="function"?(e.local?co:ho)(e,r,on(this,"attr."+t,n)):n==null?(e.local?uo:so)(e):(e.local?fo:lo)(e,r,n))}function po(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function go(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function yo(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&go(t,a)),e}return i._value=n,i}function wo(t,n){var e,r;function i(){var a=n.apply(this,arguments);return a!==r&&(e=(r=a)&&po(t,a)),e}return i._value=n,i}function vo(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(n==null)return this.tween(e,null);if(typeof n!="function")throw new Error;var r=Vt(t);return this.tween(e,(r.local?yo:wo)(r,n))}function xo(t,n){return function(){rn(this,t).delay=+n.apply(this,arguments)}}function bo(t,n){return n=+n,function(){rn(this,t).delay=n}}function _o(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?xo:bo)(n,t)):F(this.node(),n).delay}function ko(t,n){return function(){q(this,t).duration=+n.apply(this,arguments)}}function Mo(t,n){return n=+n,function(){q(this,t).duration=n}}function No(t){var n=this._id;return arguments.length?this.each((typeof t=="function"?ko:Mo)(n,t)):F(this.node(),n).duration}function Ao(t,n){if(typeof n!="function")throw new Error;return function(){q(this,t).ease=n}}function So(t){var n=this._id;return arguments.length?this.each(Ao(n,t)):F(this.node(),n).ease}function Eo(t,n){return function(){var e=n.apply(this,arguments);if(typeof e!="function")throw new Error;q(this,t).ease=e}}function $o(t){if(typeof t!="function")throw new Error;return this.each(Eo(this._id,t))}function Xo(t){typeof t!="function"&&(t=Dn(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var a=n[i],s=a.length,u=r[i]=[],f,l=0;l<s;++l)(f=a[l])&&t.call(f,f.__data__,l,a)&&u.push(f);return new L(r,this._parents,this._name,this._id)}function Co(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,a=Math.min(r,i),s=new Array(r),u=0;u<a;++u)for(var f=n[u],l=e[u],h=f.length,d=s[u]=new Array(h),m,p=0;p<h;++p)(m=f[p]||l[p])&&(d[p]=m);for(;u<r;++u)s[u]=n[u];return new L(s,this._parents,this._name,this._id)}function Io(t){return(t+"").trim().split(/^|\s+/).every(function(n){var e=n.indexOf(".");return e>=0&&(n=n.slice(0,e)),!n||n==="start"})}function To(t,n,e){var r,i,a=Io(n)?rn:q;return function(){var s=a(this,t),u=s.on;u!==r&&(i=(r=u).copy()).on(n,e),s.on=i}}function Po(t,n){var e=this._id;return arguments.length<2?F(this.node(),e).on.on(t):this.each(To(e,t,n))}function Ro(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}function Fo(){return this.on("end.remove",Ro(this._id))}function Vo(t){var n=this._name,e=this._id;typeof t!="function"&&(t=Jt(t));for(var r=this._groups,i=r.length,a=new Array(i),s=0;s<i;++s)for(var u=r[s],f=u.length,l=a[s]=new Array(f),h,d,m=0;m<f;++m)(h=u[m])&&(d=t.call(h,h.__data__,m,u))&&("__data__"in h&&(d.__data__=h.__data__),l[m]=d,Dt(l[m],n,e,m,l,F(h,e)));return new L(a,this._parents,n,e)}function qo(t){var n=this._name,e=this._id;typeof t!="function"&&(t=qn(t));for(var r=this._groups,i=r.length,a=[],s=[],u=0;u<i;++u)for(var f=r[u],l=f.length,h,d=0;d<l;++d)if(h=f[d]){for(var m=t.call(h,h.__data__,d,f),p,v=F(h,e),k=0,A=m.length;k<A;++k)(p=m[k])&&Dt(p,n,e,k,m,v);a.push(m),s.push(h)}return new L(a,s,n,e)}var Do=ht.prototype.constructor;function zo(){return new Do(this._groups,this._parents)}function Lo(t,n){var e,r,i;return function(){var a=tt(this,t),s=(this.style.removeProperty(t),tt(this,t));return a===s?null:a===e&&s===r?i:i=n(e=a,r=s)}}function ae(t){return function(){this.style.removeProperty(t)}}function Bo(t,n,e){var r,i=e+"",a;return function(){var s=tt(this,t);return s===i?null:s===r?a:a=n(r=s,e)}}function Ho(t,n,e){var r,i,a;return function(){var s=tt(this,t),u=e(this),f=u+"";return u==null&&(f=u=(this.style.removeProperty(t),tt(this,t))),s===f?null:s===r&&f===i?a:(i=f,a=n(r=s,u))}}function Oo(t,n){var e,r,i,a="style."+n,s="end."+a,u;return function(){var f=q(this,t),l=f.on,h=f.value[a]==null?u||(u=ae(n)):void 0;(l!==e||i!==h)&&(r=(e=l).copy()).on(s,i=h),f.on=r}}function Yo(t,n,e){var r=(t+="")=="transform"?Ui:oe;return n==null?this.styleTween(t,Lo(t,r)).on("end.style."+t,ae(t)):typeof n=="function"?this.styleTween(t,Ho(t,r,on(this,"style."+t,n))).each(Oo(this._id,t)):this.styleTween(t,Bo(t,r,n),e).on("end.style."+t,null)}function Wo(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function Uo(t,n,e){var r,i;function a(){var s=n.apply(this,arguments);return s!==i&&(r=(i=s)&&Wo(t,s,e)),r}return a._value=n,a}function Ko(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;return this.tween(r,Uo(t,n,e??""))}function Go(t){return function(){this.textContent=t}}function Zo(t){return function(){var n=t(this);this.textContent=n??""}}function Jo(t){return this.tween("text",typeof t=="function"?Zo(on(this,"text",t)):Go(t==null?"":t+""))}function Qo(t){return function(n){this.textContent=t.call(this,n)}}function jo(t){var n,e;function r(){var i=t.apply(this,arguments);return i!==e&&(n=(e=i)&&Qo(i)),n}return r._value=t,r}function ta(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,jo(t))}function na(){for(var t=this._name,n=this._id,e=se(),r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],u=s.length,f,l=0;l<u;++l)if(f=s[l]){var h=F(f,n);Dt(f,t,e,l,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new L(r,this._parents,t,e)}function ea(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(a,s){var u={value:s},f={value:function(){--i===0&&a()}};e.each(function(){var l=q(this,r),h=l.on;h!==t&&(n=(t=h).copy(),n._.cancel.push(u),n._.interrupt.push(u),n._.end.push(f)),l.on=n}),i===0&&a()})}var ra=0;function L(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function se(){return++ra}var z=ht.prototype;L.prototype={constructor:L,select:Vo,selectAll:qo,selectChild:z.selectChild,selectChildren:z.selectChildren,filter:Xo,merge:Co,selection:zo,transition:na,call:z.call,nodes:z.nodes,node:z.node,size:z.size,empty:z.empty,each:z.each,on:Po,attr:mo,attrTween:vo,style:Yo,styleTween:Ko,text:Jo,textTween:ta,remove:Fo,tween:ao,delay:_o,duration:No,ease:So,easeVarying:$o,end:ea,[Symbol.iterator]:z[Symbol.iterator]};function ia(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var oa={time:null,delay:0,duration:250,ease:ia};function aa(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}function sa(t){var n,e;t instanceof L?(n=t._id,t=t._name):(n=se(),(e=oa).time=en(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var s=r[a],u=s.length,f,l=0;l<u;++l)(f=s[l])&&Dt(f,t,n,l,s,e||aa(f,n));return new L(r,this._parents,t,n)}ht.prototype.interrupt=ro;ht.prototype.transition=sa;function ua(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Rt(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function et(t){return t=Rt(Math.abs(t)),t?t[1]:NaN}function la(t,n){return function(e,r){for(var i=e.length,a=[],s=0,u=t[0],f=0;i>0&&u>0&&(f+u+1>r&&(u=Math.max(1,r-f)),a.push(e.substring(i-=u,i+u)),!((f+=u+1)>r));)u=t[s=(s+1)%t.length];return a.reverse().join(n)}}function fa(t){return function(n){return n.replace(/[0-9]/g,function(e){return t[+e]})}}var ha=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ft(t){if(!(n=ha.exec(t)))throw new Error("invalid format: "+t);var n;return new an({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}Ft.prototype=an.prototype;function an(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}an.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ca(t){t:for(var n=t.length,e=1,r=-1,i;e<n;++e)switch(t[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+t[e])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ue;function da(t,n){var e=Rt(t,n);if(!e)return t+"";var r=e[0],i=e[1],a=i-(ue=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,s=r.length;return a===s?r:a>s?r+new Array(a-s+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Rt(t,Math.max(0,n+a-1))[0]}function Sn(t,n){var e=Rt(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const En={"%":(t,n)=>(t*100).toFixed(n),b:t=>Math.round(t).toString(2),c:t=>t+"",d:ua,e:(t,n)=>t.toExponential(n),f:(t,n)=>t.toFixed(n),g:(t,n)=>t.toPrecision(n),o:t=>Math.round(t).toString(8),p:(t,n)=>Sn(t*100,n),r:Sn,s:da,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function $n(t){return t}var Xn=Array.prototype.map,Cn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function ma(t){var n=t.grouping===void 0||t.thousands===void 0?$n:la(Xn.call(t.grouping,Number),t.thousands+""),e=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?$n:fa(Xn.call(t.numerals,String)),s=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function l(d){d=Ft(d);var m=d.fill,p=d.align,v=d.sign,k=d.symbol,A=d.zero,X=d.width,w=d.comma,o=d.precision,N=d.trim,x=d.type;x==="n"?(w=!0,x="g"):En[x]||(o===void 0&&(o=12),N=!0,x="g"),(A||m==="0"&&p==="=")&&(A=!0,m="0",p="=");var I=k==="$"?e:k==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",T=k==="$"?r:/[%p]/.test(x)?s:"",U=En[x],K=/[defgprs%]/.test(x);o=o===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,o)):Math.max(0,Math.min(20,o));function B(y){var E=I,S=T,G,sn,dt;if(x==="c")S=U(y)+S,y="";else{y=+y;var mt=y<0||1/y<0;if(y=isNaN(y)?f:U(Math.abs(y),o),N&&(y=ca(y)),mt&&+y==0&&v!=="+"&&(mt=!1),E=(mt?v==="("?v:u:v==="-"||v==="("?"":v)+E,S=(x==="s"?Cn[8+ue/3]:"")+S+(mt&&v==="("?")":""),K){for(G=-1,sn=y.length;++G<sn;)if(dt=y.charCodeAt(G),48>dt||dt>57){S=(dt===46?i+y.slice(G+1):y.slice(G))+S,y=y.slice(0,G);break}}}w&&!A&&(y=n(y,1/0));var pt=E.length+y.length+S.length,D=pt<X?new Array(X-pt+1).join(m):"";switch(w&&A&&(y=n(D+y,D.length?X-S.length:1/0),D=""),p){case"<":y=E+y+S+D;break;case"=":y=E+D+y+S;break;case"^":y=D.slice(0,pt=D.length>>1)+E+y+S+D.slice(pt);break;default:y=D+E+y+S;break}return a(y)}return B.toString=function(){return d+""},B}function h(d,m){var p=l((d=Ft(d),d.type="f",d)),v=Math.max(-8,Math.min(8,Math.floor(et(m)/3)))*3,k=Math.pow(10,-v),A=Cn[8+v/3];return function(X){return p(k*X)+A}}return{format:l,formatPrefix:h}}var xt,le,fe;pa({thousands:",",grouping:[3],currency:["$",""]});function pa(t){return xt=ma(t),le=xt.format,fe=xt.formatPrefix,xt}function ga(t){return Math.max(0,-et(Math.abs(t)))}function ya(t,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(et(n)/3)))*3-et(Math.abs(t)))}function wa(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,et(n)-et(t))+1}function va(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t);break}return this}function xa(t){return function(){return t}}function ba(t){return+t}var In=[0,1];function Q(t){return t}function Zt(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:xa(isNaN(n)?NaN:.5)}function _a(t,n){var e;return t>n&&(e=t,t=n,n=e),function(r){return Math.max(t,Math.min(n,r))}}function ka(t,n,e){var r=t[0],i=t[1],a=n[0],s=n[1];return i<r?(r=Zt(i,r),a=e(s,a)):(r=Zt(r,i),a=e(a,s)),function(u){return a(r(u))}}function Ma(t,n,e){var r=Math.min(t.length,n.length)-1,i=new Array(r),a=new Array(r),s=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++s<r;)i[s]=Zt(t[s],t[s+1]),a[s]=e(n[s],n[s+1]);return function(u){var f=Ne(t,u,1,r)-1;return a[f](i[f](u))}}function Na(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Aa(){var t=In,n=In,e=nn,r,i,a,s=Q,u,f,l;function h(){var m=Math.min(t.length,n.length);return s!==Q&&(s=_a(t[0],t[m-1])),u=m>2?Ma:ka,f=l=null,d}function d(m){return m==null||isNaN(m=+m)?a:(f||(f=u(t.map(r),n,e)))(r(s(m)))}return d.invert=function(m){return s(i((l||(l=u(n,t.map(r),P)))(m)))},d.domain=function(m){return arguments.length?(t=Array.from(m,ba),h()):t.slice()},d.range=function(m){return arguments.length?(n=Array.from(m),h()):n.slice()},d.rangeRound=function(m){return n=Array.from(m),e=Oi,h()},d.clamp=function(m){return arguments.length?(s=m?!0:Q,h()):s!==Q},d.interpolate=function(m){return arguments.length?(e=m,h()):e},d.unknown=function(m){return arguments.length?(a=m,d):a},function(m,p){return r=m,i=p,h()}}function Sa(){return Aa()(Q,Q)}function Ea(t,n,e,r){var i=Xe(t,n,e),a;switch(r=Ft(r??",f"),r.type){case"s":{var s=Math.max(Math.abs(t),Math.abs(n));return r.precision==null&&!isNaN(a=ya(i,s))&&(r.precision=a),fe(r,s)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=wa(i,Math.max(Math.abs(t),Math.abs(n))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ga(i))&&(r.precision=a-(r.type==="%")*2);break}}return le(r)}function $a(t){var n=t.domain;return t.ticks=function(e){var r=n();return $e(r[0],r[r.length-1],e??10)},t.tickFormat=function(e,r){var i=n();return Ea(i[0],i[i.length-1],e??10,r)},t.nice=function(e){e==null&&(e=10);var r=n(),i=0,a=r.length-1,s=r[i],u=r[a],f,l,h=10;for(u<s&&(l=s,s=u,u=l,l=i,i=a,a=l);h-- >0;){if(l=Bt(s,u,e),l===f)return r[i]=s,r[a]=u,n(r);if(l>0)s=Math.floor(s/l)*l,u=Math.ceil(u/l)*l;else if(l<0)s=Math.ceil(s*l)/l,u=Math.floor(u*l)/l;else break;f=l}return t},t}function he(){var t=Sa();return t.copy=function(){return Na(t,he())},va.apply(t,arguments),$a(t)}function st(t,n,e){this.k=t,this.x=n,this.y=e}st.prototype={constructor:st,scale:function(t){return t===1?this:new st(this.k*t,this.x,this.y)},translate:function(t,n){return t===0&n===0?this:new st(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};st.prototype;const Xa={class:"d3-plot",ref:"parent"},Ca=Tn({__name:"samples-plot",props:{values:{},domain:{},width:{},disableLabels:{type:Boolean,default:!0}},setup(t){const n=t,e=bt(null);function r(){if(!e.value)return;const i=20+(n.disableLabels?0:10);let a=bi(e.value);a.selectAll("*").remove(),a=a.attr("width",n.width).attr("height",i),a.attr("style","background-color: transparent;");const s=Ce(n.values)||0,u=he().domain([n.domain.left||0,n.domain.right||0]).range([20,n.width-20]);let f=De(u);n.disableLabels&&(f=f.tickFormat(()=>"")),a.append("g").attr("transform","translate(0, 7)").call(f),a.selectAll(".dot").data(n.values).enter().append("circle").attr("class","dot").attr("cx",l=>u(l)).attr("cy",7).attr("r",4).attr("fill","#2d96bd"),a.append("line").attr("x1",u(s)).attr("x2",u(s)).attr("y1",0).attr("y2",15).attr("stroke","#ef3982").attr("stroke-width",2)}return ce(r),de(()=>n.width,r),(i,a)=>(Z(),At("div",Xa,[(Z(),At("svg",{ref_key:"svgRef",ref:e},null,512))],512))}}),Ia={class:"sample-plot"},Ta={class:"sample-row"},Pa={class:"sample-number",style:{"font-weight":"bold"}},Ra={class:"sample-number",style:{"font-weight":"bold"}},Fa=Tn({__name:"bessel-correction",setup(t){const n=me("parent"),e=bt(pe["bessel-correction"]),r=new J(0,1);function i(w,o=2){return Math.round((w+Number.EPSILON)*Math.pow(10,o))/Math.pow(10,o)}function a(){return Array.from({length:10},()=>i(r.ppf(Math.random())))}function s(w){return w.reduce((o,N)=>o+N,0)/w.length}function u(w){const o=s(w);return w.reduce((N,x)=>N+Math.pow(x-o,2))/w.length}function f(w){const o=s(w);return w.reduce((N,x)=>N+Math.pow(x-o,2))/(w.length-1)}const l=bt(d()),h=rt(()=>{const w=l.value.reduce((x,I)=>({left:Math.min(x.left,Math.min(...I)),right:Math.max(x.right,Math.max(...I))}),{left:0,right:0}),o=Math.max(Math.abs(w.left),Math.abs(w.right)),N=i(o,1);return{left:-N,right:N}});function d(){return Array.from({length:15},w=>a())}const m=rt(()=>l.value.map(w=>Math.abs(1-u(w))<Math.abs(1-f(w)))),p=rt(()=>m.value.filter(Boolean).length),v=rt(()=>l.value.map(w=>Math.abs(1-u(w))>Math.abs(1-f(w)))),k=rt(()=>v.value.filter(Boolean).length),A=bt(0);function X(){A.value++,l.value=d()}return(w,o)=>(Z(),un(ge,{article:e.value},{default:b(()=>[o[68]||(o[68]=g("p",null,[c(`
            Like everyone else these days, you'd break out Python to calculate things. Say you're curious about a data set's variance and use NumPy's `),g("code",null,"np.var(data)"),c(`.
            A moment later you try Pandas' `),g("code",null,"pd.Series(data).var()"),c(` and you get a different answer.
            What gives?
        `)],-1)),o[69]||(o[69]=c()),o[70]||(o[70]=g("p",null,`
            It turns out that NumPy's default calculates the population variance, whereas Pandas, arguably more helpfully, calculates the sample variance.
        `,-1)),o[71]||(o[71]=c()),o[72]||(o[72]=g("p",null,`
            The justification that I've heard more than once is a hand-wavy "statisticians divide by n-1". I think the actual explanation is actually quite intuitive.
        `,-1)),o[73]||(o[73]=c()),o[74]||(o[74]=g("h2",null,"A tale of two estimated variances",-1)),o[75]||(o[75]=c()),o[76]||(o[76]=g("p",null,`
            Variance measures how spread out a distribution is. It takes each data point, finds its distance from the mean, and squares it. Sum it all up, and we have the sum of squared deviations. But this sum grows with the number of data points. To fix that, we have to choose what to divide it by, and this is where NumPy and Pandas choose differently.
        `,-1)),o[77]||(o[77]=c()),o[78]||(o[78]=g("p",null,`
            First, I'll try to convince you that Pandas' estimate is often more accurate.
        `,-1)),o[79]||(o[79]=c()),o[80]||(o[80]=g("p",null,`
            I'll randomly sample from a standard normal distribution, drawing fifteen samples of ten points each, mostly because that fits on my screen. Draws are shown in blue, the mean is pink.
        `,-1)),o[81]||(o[81]=c()),o[82]||(o[82]=g("p",null,`
            Now, the distribution I'm sampling from has a mean of 0 and a variance of 1: you already know the correct estimate is 1. The estimated 
            variance for each method is shown to the right of each figure, and the estimate closest to the true variance is underlined. The percentages at the bottom show how often each method wins.
        `,-1)),o[83]||(o[83]=c()),g("p",null,[o[1]||(o[1]=c(`
            Click `,-1)),g("code",{onClick:o[0]||(o[0]=N=>X()),class:"code-link"},"next sample"),o[2]||(o[2]=c(` a few times. Which
            estimate comes closer to the known true variance of 1?
        `,-1))]),o[84]||(o[84]=c()),g("div",{ref_key:"parent",ref:n,class:"sample-container"},[o[8]||(o[8]=g("div",{class:"sample-row"},[g("div",{class:"sample-plot"}),c(),g("div",{class:"sample-number",style:{"font-weight":"bold"}},"NumPy"),c(),g("div",{class:"sample-number",style:{"font-weight":"bold"}},"Pandas")],-1)),o[9]||(o[9]=c()),(Z(!0),At(ye,null,we(l.value,(N,x)=>(Z(),At("div",{class:"sample-row sample-row-hv",key:x},[g("div",Ia,[(Z(),un(Ca,{width:(n.value?.clientWidth??500)-128,key:A.value+"-"+x,values:N,domain:h.value,"disable-labels":x!==l.value.length-1},null,8,["width","values","domain","disable-labels"]))]),o[3]||(o[3]=c()),g("div",{class:"sample-number",style:ln([m.value[x]?{"text-decoration-line":"underline","text-decoration-color":"#ef3982","text-underline-offset":"2px"}:{}])},gt(i(u(N))),5),o[4]||(o[4]=c()),g("div",{class:"sample-number",style:ln([v.value[x]?{"text-decoration-line":"underline","text-decoration-color":"#ef3982","text-underline-offset":"2px"}:{}])},gt(i(f(N))),5)]))),128)),o[10]||(o[10]=c()),g("div",Ta,[o[5]||(o[5]=g("div",{class:"sample-plot"},null,-1)),o[6]||(o[6]=c()),g("div",Pa,gt(i(100*p.value/l.value.length,1))+"%",1),o[7]||(o[7]=c()),g("div",Ra,gt(i(100*k.value/l.value.length,1))+"%",1)])],512),o[85]||(o[85]=c()),g("p",null,[o[12]||(o[12]=c(`
            If your random numbers are anything like mine`,-1)),_(fn,null,{default:b(()=>[...o[11]||(o[11]=[c("What ",-1),g("code",null,"Math.random",-1),c(" will do on your machine is hard to predict.",-1)])]),_:1}),o[13]||(o[13]=c(`, Pandas
            does a better job. Chance dictates that NumPy will occasionally do better, but mostly it won't.
        `,-1))]),o[86]||(o[86]=c()),o[87]||(o[87]=g("h2",null,"Estimating two things at once",-1)),o[88]||(o[88]=c()),o[89]||(o[89]=g("p",null,`
            Forget about variance for a moment and instead focus on the mean. Look at the pink lines in the figures. You know I'm sampling from 
            a distribution with a mean of zero. Are the means in the right places?
        `,-1)),o[90]||(o[90]=c()),o[91]||(o[91]=g("p",null,[c(`
            Mostly, they are not, and this matters. Variance is the squared difference `),g("b",null,"from the mean"),c(`. Ah, but I don't know the true mean. I had 
            to estimate it from the data too, and some of these estimates are not all that great.
        `)],-1)),o[92]||(o[92]=c()),o[93]||(o[93]=g("p",null,`
            Consider a sample that happens to mostly contain points falling to the left of the true mean of 0. Now the sample mean will be to the left of the 
            true mean too, and the distance from each point to the estimated mean will be smaller than the distance to the the true mean.
            You will likely find an example of this in the samples above. If not, generate a few more samples. Note how the sample mean sort of follows the data around, thereby reducing those squared distances, resulting in a smaller variance estimate with the sample mean than I would get had I used the true mean.
        `,-1)),o[94]||(o[94]=c()),g("p",null,[o[16]||(o[16]=c(`
            Dividing the sum of squared deviations by `,-1)),_(M,null,{default:b(()=>[...o[14]||(o[14]=[c("n - 1",-1)])]),_:1}),o[17]||(o[17]=c(" rather than ",-1)),_(M,null,{default:b(()=>[...o[15]||(o[15]=[c("n",-1)])]),_:1}),o[18]||(o[18]=c(` accounts for this underestimation. Sometimes this is called Bessel's correction. 
        `,-1))]),o[95]||(o[95]=c()),o[96]||(o[96]=g("h2",null,"Deriving n-1",-1)),o[97]||(o[97]=c()),g("p",null,[o[20]||(o[20]=c(`
            Hopefully the intuition is clear by now. But even though I may have convinced you there is an underestimation problem, you may still be wondering why the correction is exactly `,-1)),_(M,null,{default:b(()=>[...o[19]||(o[19]=[c("n - 1",-1)])]),_:1}),o[21]||(o[21]=c(` and not something else altogether.
        `,-1))]),o[98]||(o[98]=c()),o[99]||(o[99]=g("p",null,`
            Packed into a formula, variance is the expected value of the squared distance from the mean.
        `,-1)),o[100]||(o[100]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[22]||(o[22]=[c("\\text{Var}(X) = \\text{E}[(X - \\text{E}[X])^2]",-1)])]),_:1})]),o[101]||(o[101]=c()),g("p",null,[o[25]||(o[25]=c(`
            I want to show 
            mathematically where `,-1)),_(M,null,{default:b(()=>[...o[23]||(o[23]=[c("n - 1",-1)])]),_:1}),o[26]||(o[26]=c(" makes an appearance when estimating this expected value, starting with the sum of squared deviations from the mean.",-1)),_(fn,null,{default:b(()=>[...o[24]||(o[24]=[c("This is probably the moment to mention that the data points here are independent and identically distributed.",-1)])]),_:1}),o[27]||(o[27]=c(` You see I am estimating two things using the same data.
        `,-1))]),o[102]||(o[102]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[28]||(o[28]=[c(`
                \\begin{aligned}
                \\text{SSD}(X) &= \\Sigma_i (X_i - m)^2 \\\\
                            m &= \\frac{1}{n}\\Sigma_i X_i
                \\end{aligned}
            `,-1)])]),_:1})]),o[103]||(o[103]=c()),o[104]||(o[104]=g("p",null,`
            Take its expected value, and simplify.
        `,-1)),o[105]||(o[105]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[29]||(o[29]=[c(`
            \\begin{aligned}
                \\text{E}\\left[\\Sigma_i (X_i - m)^2\\right] &= \\text{E}\\left[\\Sigma_i X_i^2 - \\Sigma_i 2m X_i + \\Sigma_i m^2\\right] &&\\text{expand} \\\\ 
                                                          &= \\text{E}\\left[\\Sigma_i X_i^2 - 2 n m^2 + n m^2\\right] &&\\text{because}\\,\\Sigma_i X_i = nm\\\\
                                                          &= \\text{E}\\left[\\Sigma_i X_i^2 - n m^2\\right] \\\\
                                                          &= n \\text{E}\\left[X^2\\right] - n \\text{E}\\left[m^2\\right]
            \\end{aligned}
            `,-1)])]),_:1})]),o[106]||(o[106]=c()),g("p",null,[o[32]||(o[32]=c(`
            Why does `,-1)),_(M,null,{default:b(()=>[...o[30]||(o[30]=[c("m^2",-1)])]),_:1}),o[33]||(o[33]=c(" need to stay in brackets? Because ",-1)),_(M,null,{default:b(()=>[...o[31]||(o[31]=[c("m",-1)])]),_:1}),o[34]||(o[34]=c(` is a random variable! 
            You figured that out earlier when the pink bars were all over the place. Express this in terms of mean and variance to
            make apparent what this implies.
        `,-1))]),o[107]||(o[107]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[35]||(o[35]=[c(`
            \\begin{aligned}
                \\text{Var}(m) &= \\text{E}[(m - \\text{E}[m])^2] && \\text{definition of variance} \\\\
                              &= \\text{E}[m^2] - \\text{E}[m]^2 \\\\
                \\text{E}[m^2] &= \\text{Var}(m) + \\text{E}[m]^2 && \\text{rearrange} \\\\
            \\end{aligned}
            `,-1)])]),_:1})]),o[108]||(o[108]=c()),g("p",null,[o[37]||(o[37]=c(`
            Therefore, the estimated mean itself has variance. We actually want to express everything in terms of `,-1)),_(M,null,{default:b(()=>[...o[36]||(o[36]=[c("X",-1)])]),_:1}),o[38]||(o[38]=c(`, so do that next.
        `,-1))]),o[109]||(o[109]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[39]||(o[39]=[c(`
            \\begin{aligned}
                \\text{E}[m^2] &= \\text{Var}(m) + \\text{E}[m]^2 \\\\
                              &= \\text{Var}(\\frac{1}{n}\\Sigma_i X_i) + \\text{E}[\\frac{1}{n}\\Sigma_i X_i]^2 && \\text{because}\\, m = \\frac{1}{n}\\Sigma_i X_i \\\\
                              &= \\frac{1}{n^2}\\text{Var}(\\Sigma_i X_i) + \\frac{1}{n}\\text{E}[\\Sigma_i X_i]^2 \\\\
                              &= \\frac{1}{n}\\text{Var}(X) + \\text{E}[X]^2 && \\text{linearity}
            \\end{aligned}
            `,-1)])]),_:1})]),o[110]||(o[110]=c()),g("p",null,[o[42]||(o[42]=c(`
            That takes care of `,-1)),_(M,null,{default:b(()=>[...o[40]||(o[40]=[c("\\text{E}\\left[m^2\\right]",-1)])]),_:1}),o[43]||(o[43]=c(", but the sum of squared deviations had another term ",-1)),_(M,null,{default:b(()=>[...o[41]||(o[41]=[c("\\text{E}[X^2]",-1)])]),_:1}),o[44]||(o[44]=c(`. Again, express it in terms its variance.
        `,-1))]),o[111]||(o[111]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[45]||(o[45]=[c("\\text{E}[X^2] = \\text{Var}(X) + \\text{E}[X]^2",-1)])]),_:1})]),o[112]||(o[112]=c()),o[113]||(o[113]=g("p",null,`
            Let's combine everything we have figured out.
        `,-1)),o[114]||(o[114]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[46]||(o[46]=[c(`
            \\begin{aligned}
                E\\left[SSD(X) \\right] &= n \\text{E}\\left[X^2\\right] - n \\text{E}\\left[m^2\\right] \\\\
                 &= n \\left(\\text{Var}(X) + \\text{E}[X]^2\\right) - n (\\frac{1}{n}\\text{Var}(X) + \\text{E}[X]^2) \\\\
                                                                        &= n \\text{Var}(X) +  n \\text{E}[X]^2 - n \\frac{1}{n}\\text{Var}(X) - n \\text{E}[X]^2 \\\\
                                                                        &= (n - 1) \\text{Var}(X)
            \\end{aligned}
            `,-1)])]),_:1})]),o[115]||(o[115]=c()),g("p",null,[o[50]||(o[50]=c(`
            At last, Pandas' `,-1)),_(M,null,{default:b(()=>[...o[47]||(o[47]=[c("n-1",-1)])]),_:1}),o[51]||(o[51]=c(" appears! If we want ",-1)),_(M,null,{default:b(()=>[...o[48]||(o[48]=[c("\\text{Var}(X)",-1)])]),_:1}),o[52]||(o[52]=c(` in expectation, divide the
            sum of squared deviations from the mean by `,-1)),_(M,null,{default:b(()=>[...o[49]||(o[49]=[c("n-1",-1)])]),_:1}),o[53]||(o[53]=c(`.
        `,-1))]),o[116]||(o[116]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[54]||(o[54]=[c("\\text{Var}(X) = \\frac{1}{n - 1} \\Sigma_i (X_i - \\frac{1}{n}\\Sigma_i X_i)^2",-1)])]),_:1})]),o[117]||(o[117]=c()),g("p",null,[o[57]||(o[57]=c(`
            So what's NumPy up to? Well, say that your `,-1)),_(M,null,{default:b(()=>[...o[55]||(o[55]=[c("X_i",-1)])]),_:1}),o[58]||(o[58]=c(`'s aren't just a sample, but it's all there is. Now
            the estimated mean is the true mean, simply because you have all the values: the mean of the entire population. In that case, 
            divide by `,-1)),_(M,null,{default:b(()=>[...o[56]||(o[56]=[c("n",-1)])]),_:1}),o[59]||(o[59]=c(`.
        `,-1))]),o[118]||(o[118]=c()),o[119]||(o[119]=g("h2",null,"Degrees of freedom",-1)),o[120]||(o[120]=c()),o[121]||(o[121]=g("p",null,`
            Consider again how the mean is defined. If I tell you the sample size is 2, the 
            mean is 5, and one value is 0, what do you know about the remaining value?
        `,-1)),o[122]||(o[122]=c()),g("p",null,[_(M,{class:"indent"},{default:b(()=>[...o[60]||(o[60]=[c("\\frac{0 + x}{2} = 5",-1)])]),_:1})]),o[123]||(o[123]=c()),g("p",null,[o[63]||(o[63]=c(`
            The mean imposes a constraint that dictates that `,-1)),_(M,null,{default:b(()=>[...o[61]||(o[61]=[c("x = 10",-1)])]),_:1}),o[64]||(o[64]=c(". There is no room or ",-1)),o[65]||(o[65]=g("i",null,"freedom",-1)),o[66]||(o[66]=c(` for it to be anything else. You only 
            need `,-1)),_(M,null,{default:b(()=>[...o[62]||(o[62]=[c("n - 1",-1)])]),_:1}),o[67]||(o[67]=c(` values and the last value follows.
        `,-1))]),o[124]||(o[124]=c()),o[125]||(o[125]=g("p",null,[c(`
            And of course, NumPy is a serious library that has been around forever. By doing `),g("code",null,"np.var(data, ddof=1)"),c(", where "),g("code",null,"ddof"),c(` 
            means delta degrees of freedom, you're going to get Pandas' answer too. It really just is an unfortunate default setting.
        `)],-1))]),_:1},8,["article"]))}}),qa=ve(Fa,[["__scopeId","data-v-798d22c6"]]);export{qa as default};
